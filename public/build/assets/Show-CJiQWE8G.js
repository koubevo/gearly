import{o as c,d as m,a as n,y as x,t as h,n as _,u,r as v,k as w,F as k,z as j,c as y,w as f,g as d,A as $,f as o,P as b,b as O,v as B,B as M}from"./app-CuUtu08i.js";import{_ as C}from"./NormalText-DkRq52PU.js";import{D as S}from"./Divider-cEybqaiv.js";import{_ as p}from"./Heading3-DHHpLIvE.js";import{_ as D}from"./SmallText-DFt21Vfu.js";import{_ as V}from"./PriceCard-DfNRv9ka.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function z(e,s){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}const N={__name:"Message",props:{message:Object},setup(e){var r;const t=(r=x().props.auth)==null?void 0:r.user;return(a,l)=>(c(),m("div",{class:_(["px-3 py-2 inline-block max-w-[60%]",{"bg-primary-900 text-white self-end":e.message.author_id===u(t).id,"bg-gray-200":e.message.sender_id!==u(t).id}])},h(e.message.message),3))}},T={class:"overflow-y-auto h-[80vh]"},U={class:"flex flex-col gap-2 items-start"},A={__name:"ChatSection",props:{seller:Object,buyer:Object,offer:Object},setup(e){const s=e,t=v([]);async function r(){try{const a=await $.get(route("chat.load",{offer:s.offer,buyer:s.buyer}));t.value=a.data.messages}catch{console.error("err")}}return w(()=>{r()}),(a,l)=>(c(),m("section",T,[n("div",U,[t.value.length?(c(!0),m(k,{key:0},j(t.value,i=>(c(),y(N,{key:i.id,message:i},null,8,["message"]))),128)):(c(),y(C,{key:1,class:"text-center self-center mt-10 text-primary-900"},{default:f(()=>l[0]||(l[0]=[d("Start the conversation with a message!")])),_:1}))])]))}},F={class:"flex flex-col gap-4"},I={class:"flex gap-2 items-center"},K=["src","alt"],L={class:"flex items-center gap-2"},P={__name:"InfoSection",props:{buyer:Object,seller:Object,offer:Object},setup(e){var l;const t=(l=x().props.auth)==null?void 0:l.user,r=e;let a;return t.id===r.buyer.id?a=r.seller.name:a=r.buyer.name,(i,g)=>(c(),m("section",F,[o(u(b),{href:i.route("offer.show",{offer:e.offer})},{default:f(()=>[n("div",I,[n("div",null,[n("img",{src:e.offer.thumbnail_url,alt:e.offer.name,class:"h-14",loading:"lazy"},null,8,K)]),n("div",null,[o(p,null,{default:f(()=>[d(h(e.offer.name),1)]),_:1}),o(V,{price:e.offer.price,currency:e.offer.currency},null,8,["price","currency"])])])]),_:1},8,["href"]),o(u(b),{href:i.route("user.show",{user:e.seller.id})},{default:f(()=>[n("div",L,[o(p,null,{default:f(()=>[d(h(u(a)),1)]),_:1}),o(D,null,{default:f(()=>g[0]||(g[0]=[d("Rating")])),_:1})])]),_:1},8,["href"]),o(S,{class:"md:w-full"})]))}},E={class:"flex flex-col h-[calc(100vh-90px)] max-w-5xl mx-auto"},R={class:"flex items-center justify-between gap-4 flex-shrink-0"},X={__name:"Show",props:{buyer:Object,seller:Object,offer:Object},setup(e){const s=v(""),t=e,r=()=>{s.value.trim()!==""&&axios.post(route("chat.send",{offer:t.offer,buyer:t.buyer}),{message:s.value,type_id:1}).then(a=>{s.value=""})};return(a,l)=>(c(),m("section",E,[o(P,{seller:e.seller,offer:e.offer,buyer:e.buyer,class:"mb-4 flex-shrink-0"},null,8,["seller","offer","buyer"]),o(A,{seller:e.seller,offer:e.offer,buyer:e.buyer,class:"mb-4 flex-grow overflow-auto"},null,8,["seller","offer","buyer"]),n("section",R,[O(n("input",{type:"text",name:"message","onUpdate:modelValue":l[0]||(l[0]=i=>s.value=i),onKeyup:M(r,["enter"]),class:"input-style",placeholder:"Type a message..."},null,544),[[B,s.value]]),n("button",{onClick:r},[o(u(z),{class:"w-5 h-5 stroke-[2]"})])])]))}};export{X as default};
